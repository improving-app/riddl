command EstablishOrganization is {
  info: OrganizationContext.Info briefly "Details about an organization required for it to exist. See OrganizationContext.Organization.Info for details.",
  tenant: TenantId,
  parent: Parent?,
  members: MemberList,
  owners: OwnerList,
  contacts: ContactList,
  establishingMember: ^MembersContext.MemberId briefly "The Id of the Member who is issuing the create command."
} briefly "If parentOrg is not defined you are creating a BaseOrganization. If it is, you are creating a SubOrganization."
described in file "establishOrganization.md"

event OrganizationEstablished is {
  orgId: OrganizationId briefly "Unique identifier returned by EstablishOrganization command",
  info: OrganizationContext.Info,
  parent: Parent?,
  members: MemberList,
  owners: OwnerList,
  contacts: ContactList,
  meta: OrganizationContext.MetaInfo
}

command EditOrganizationInfo is {
  orgId: OrganizationId briefly "The unique Id of the organization to create",
  newInfo: OrganizationContext.EditableInfo briefly "The information about the organization",
  editingMember: ^MembersContext.MemberId briefly "Id of the member who is creating the organization"
} briefly "A command to edit the values of an Organization's Info "
described in file "editOrganizationInfo.md"

event OrganizationInfoEdited {
  orgId: OrganizationId,
  info: OrganizationContext.Info,
  meta: OrganizationContext.MetaInfo
}

command UpdateParent is {
  orgId: OrganizationId,
  newParent: OrganizationId
}
event ParentUpdated is {
  orgId: OrganizationId,
  newParent: OrganizationId,
  meta: OrganizationContext.MetaInfo
}
command AddMembersToOrganization is {
  orgId: OrganizationId,
  membersToAdd: ^MembersContext.MemberId+,
  updatingMember: ^MembersContext.MemberId
  // TODO: orgId: OrganizationId briefly @orgId,
  // TODO: members: ^MembersContext.MemberId+ briefly @membersList
}
// TODO: Should members be a list of the all members (including new), or should it be only the new members (relevant for #2 and 4 above)
event MembersAddedToOrganization is {
  orgId: OrganizationId,
  newMembers: ^MembersContext.MemberId+,
  meta: OrganizationContext.MetaInfo
}
command RemoveMembersFromOrganization is {
  orgId: OrganizationId,
  membersToRemove: ^MembersContext.MemberId+,
  updatingMember: ^MembersContext.MemberId
}
event MembersRemovedFromOrganization is {
  orgId: OrganizationId,
  removedMembers: ^MembersContext.MemberId+,
  updatingMember: ^MembersContext.MemberId
}
command AddOwnersToOrganization is {
  orgId: OrganizationId,
  ownersToAdd: ^MembersContext.MemberId+,
  updatingMember: ^MembersContext.MemberId
}
event OwnersAddedToOrganization is {
  orgId: OrganizationId,
  newOwners: ^MembersContext.MemberId+,
  meta: OrganizationContext.MetaInfo
}
command RemoveOwnersFromOrganization is {
  orgId: OrganizationId,
  ownersToRemove: ^MembersContext.MemberId+,
  updatingMember: ^MembersContext.MemberId
}
event OwnersRemovedFromOrganization is {
  orgId: OrganizationId,
  removedOwners: ^MembersContext.MemberId+,
  meta: OrganizationContext.MetaInfo
}
command UpdateOrganizationContacts is {
  orgId: OrganizationId,
  contacts: Contacts,
  updatingMember: ^MembersContext.MemberId
}
event OrganizationContactsUpdated is {
  orgId: OrganizationId,
  contacts: Contacts,
  meta: OrganizationContext.MetaInfo
}

command ActivateOrganization is {
  orgId: OrganizationId,
  activatingMember: ^MembersContext.MemberId
}
event OrganizationActivated is {
  orgId: OrganizationId,
  meta: OrganizationContext.MetaInfo
}

command SuspendOrganization is {
  orgId: OrganizationId,
  suspendingMember: ^MembersContext.MemberId
}
event OrganizationSuspended is {
  orgId: OrganizationId,
  meta: OrganizationContext.MetaInfo
}

command TerminateOrganization is {
  orgId: OrganizationId,
  terminatingMember: ^MembersContext.MemberId
}
event OrganizationTerminated is {
  orgId: OrganizationId,
  meta: OrganizationContext.MetaInfo
}

command UpdateOrganizationAccounts is {
  orgId: OrganizationId
  /*,
  accounts: Accounts */
}
event OrganizationAccountsUpdated is {
  orgId: OrganizationId,
  info: OrganizationContext.Info,
  meta: OrganizationContext.MetaInfo
}

query FindOrganizationsByMemberOrOwner is {memberOrOwner: ^MembersContext.MemberId, isMember: Boolean} briefly "Get a list of organizations that a member belongs to."
result OrganizationListByMemberOrOwner is {
  memberOrOwner: ^MembersContext.MemberId,
  isMember: Boolean,
  organizations: OrganizationId*
}
query GetOrganizationInfo is {orgId: OrganizationId}
result OrganizationInfo is {
  orgId: OrganizationId,
  info: OrganizationContext.Info
}
